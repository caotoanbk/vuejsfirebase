webpackJsonp([1],{0:function(t,e){},"0pd7":function(t,e,i){"use strict";(function(t){var a=i("vX5M"),s=i("vQJi"),r=i.n(s);e.a={data:function(){return{descFilter:"",typeFilter:"",files:[],removeKeys:[]}},created:function(){this.$http.get("https://vuejs-firebase-02-ded5b.firebaseio.com/files.json").then(function(e){for(var i=t.map(e.body,function(t,e){return[t]}),a=t.map(e.body,function(t,e){return[e]}),s=0;s<i.length;s++)i[s].key=a[s];this.files=i})},computed:{filteredFiles:function(){var e=this,i=new RegExp(this.descFilter,"i"),a=new RegExp(this.typeFilter,"i");return this.files.filter(function(s){return s.description.match(i)&&s.type.match(a)&&-1==t.inArray(s.key,e.removeKeys)})}},methods:{removeFile:function(t){var e=this;a.a.storage().ref().child("files/"+t.key+t.extension).delete().then(function(){a.b.child(t.key).remove(),e.removeKeys.push(t.key),r.a.success("File removed")}).catch(function(t){alert("Error when delete file on firebase storage")})}}}}).call(e,i("7t+N"))},"5Qkr":function(t,e){},"6nZI":function(t,e){},"8+6V":function(t,e){},IToN:function(t,e){},Jmt5:function(t,e){},KPPl:function(t,e){},M93x:function(t,e,i){"use strict";var a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"navbar navbar-expand-lg navbar-dark bg-dark",attrs:{id:"header"}},[e("router-link",{staticClass:"navbar-brand",attrs:{to:"/",exact:""}},[this._v("FileUploader")]),this._v(" "),this._m(0),this._v(" "),e("nav",{staticClass:"collapse navbar-collapse",attrs:{id:"navbar"}},[e("ul",{staticClass:"navbar-nav"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/",exact:""}},[this._v("List File")])],1),this._v(" "),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/upload",exact:""}},[this._v("Upload File")])],1)])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button"}},[e("span",{staticClass:"navbar-toggler-icon"})])}]};var s={name:"App",components:{Header:i("VU/8")({},a,!1,function(t){i("8+6V")},null,null).exports,Full:i("rL1v").a}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Header"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var o=i("VU/8")(s,r,!1,function(t){i("6nZI")},null,null);e.a=o.exports},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var e=i("7+uW"),a=i("1mcD"),s=i.n(a),r=i("M93x"),o=i("/ocq"),n=i("8+8L"),l=i("7t+N"),c=i.n(l),d=i("eqvY"),p=i("Jmt5"),u=(i.n(p),i("5Qkr")),v=(i.n(u),i("IToN"));i.n(v);t.jQuery=c.a;i("K3J8");e.a.config.productionTip=!1,e.a.use(s.a),e.a.use(o.a),e.a.use(n.a),e.a.filter("formatSize",function(t){return t>1048576?(t/1048576).toFixed(2)+" MB":t>1024?(t/1024).toFixed(2)+" KB":t.toFixed(2)+" B"});var f=new o.a({routes:d.a});new e.a({el:"#app",components:{App:r.a},template:"<App/>",router:f})}.call(e,i("DuR2"))},eqvY:function(t,e,i){"use strict";var a=i("0pd7"),s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h2",{staticClass:"example-title",staticStyle:{"text-align":"left","padding-left":"1rem"},attrs:{id:"example-title"}},[t._v("List files")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.descFilter,expression:"descFilter"}],staticClass:"form-control",staticStyle:{"max-width":"25%",display:"inline-block"},attrs:{type:"text",placeholder:"Enter description to search .."},domProps:{value:t.descFilter},on:{input:function(e){e.target.composing||(t.descFilter=e.target.value)}}}),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.typeFilter,expression:"typeFilter"}],staticClass:"form-control",staticStyle:{"max-width":"25%",display:"inline-block"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.typeFilter=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:""}},[t._v("Type")]),i("option",[t._v("image")]),i("option",[t._v("audio")]),i("option",[t._v("video")])]),t._v(" "),i("br"),t._v(" "),i("br"),t._v(" "),i("div",{staticClass:"table-responsive",staticStyle:{"min-height":"350px"}},[i("table",{staticClass:"table table-hover"},[t._m(0),t._v(" "),i("tbody",t._l(t.filteredFiles,function(e,a){return i("tr",[i("td",[t._v(t._s(a+1))]),t._v(" "),i("td",[e.type.match("image")?i("i",{staticClass:"fa fa-picture-o"}):t._e(),e.type.match("video")?i("i",{staticClass:"fa fa-video-camera"}):t._e(),e.type.match("audio")?i("i",{staticClass:"fa fa-music"}):t._e(),i("a",{attrs:{href:e.fileUrl,target:"_blank"}},[t._v(" "+t._s(e.name))])]),t._v(" "),i("td",[t._v(t._s(e.description))]),t._v(" "),i("td",[t._v(t._s(e.type))]),t._v(" "),i("td",[t._v(t._s(t._f("formatSize")(e.size)))]),t._v(" "),i("td",{staticStyle:{"text-align":"center",cursor:"pointer"}},[i("i",{staticClass:"fa fa-trash",on:{click:function(i){t.removeFile(e)}}})])])}))])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",[i("th",[t._v("#")]),t._v(" "),i("th",[t._v("Name")]),t._v(" "),i("th",[t._v("Description")]),t._v(" "),i("th",[t._v("Type")]),t._v(" "),i("th",[t._v("Size")]),t._v(" "),i("th",{staticStyle:{"text-align":"center"}},[t._v("Delete")])])])}]};var r=function(t){i("y2e0")},o=i("VU/8")(a.a,s,!1,r,"data-v-3c2ef364",null).exports,n=i("rL1v");e.a=[{path:"/",component:o},{path:"/upload",component:n.a}]},rL1v:function(t,e,i){"use strict";var a=i("Dd8w"),s=i.n(a),r=i("4RJ8"),o=i.n(r),n=i("5erj"),l=i.n(n),c=i("1Wvq"),d=i.n(c),p=i("vX5M"),u=i("Sazm"),v=i.n(u),f={firebase:{filesDb:p.b},components:{FileUpload:d.a},data:function(){return{files:[],accept:"image/png,image/gif,image/jpeg,image/webp",extensions:"gif,jpg,jpeg,png,webp",minSize:1024,size:10485760,multiple:!0,directory:!1,drop:!0,dropDirectory:!0,addIndex:!1,thread:3,name:"file",autoCompress:1048576,uploadAuto:!1,isOption:!1,addData:{show:!1,name:"",type:"",content:""},editFile:{show:!1,name:""}}},watch:{"editFile.show":function(t,e){!t&&e&&this.$refs.upload.update(this.editFile.id,{error:this.editFile.error||""}),t&&this.$nextTick(function(){if(this.$refs.editImage){var t=new o.a(this.$refs.editImage,{autoCrop:!1});this.editFile=s()({},this.editFile,{cropper:t})}})},"addData.show":function(t){t&&(this.addData.name="",this.addData.type="",this.addData.content="")}},methods:{uploadFileToFirebase:function(t,e){var i=t.name,a=i.slice(i.lastIndexOf("."));p.b.push({name:t.name,description:t.description||"",size:t.size,type:t.type,extension:a}).then(function(t){return t.key}).then(function(i){var s=p.a.storage().ref("files/"+i+a).put(t.file);t.active=!0,e.reupload&&(t.error="",t.progress="0.00"),s.on(v.a.storage.TaskEvent.STATE_CHANGED,function(e){var i=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+i+"% done"),t.progress=i,e.state){case v.a.storage.TaskState.PAUSED:break;case v.a.storage.TaskState.RUNNING:console.log("Upload is running"),"cancel"==t.error&&s.cancel()}},function(e){switch(e.code){case"storage/unauthorized":break;case"storage/canceled":console.log("Upload is canceled")}p.b.child(i).remove(),t.active=!1,t.success=!1},function(){var e=s.snapshot.downloadURL;p.b.child(i).update({fileUrl:e}).then(function(e){t.success=!0,t.active=!1,t.error=""}).catch(function(e){t.active=!1,t.error="unknown error",t.success=!1,console.log("error")})})})},inputFilter:function(t,e,i){var a=this;if(t&&!e){if(/(\/|^)(Thumbs\.db|desktop\.ini|\..+)$/.test(t.name))return i();if(/\.(php5?|html?|jsx?)$/i.test(t.name))return i();if(t.file&&"image/"===t.type.substr(0,6)&&this.autoCompress>0&&this.autoCompress<t.size)t.error="compressing",new l.a(null,{convertSize:1/0,maxWidth:512,maxHeight:512}).compress(t.file).then(function(e){a.$refs.upload.update(t,{error:"",file:e,size:e.size,type:e.type})}).catch(function(e){a.$refs.upload.update(t,{error:e.message||"compress"})})}if(t&&(!e||t.file!==e.file)){t.blob="";var s=window.URL||window.webkitURL;s&&s.createObjectURL&&(t.blob=s.createObjectURL(t.file)),t.thumb="",t.blob&&"image/"===t.type.substr(0,6)&&(t.thumb=t.blob)}},inputFile:function(t,e){t&&e&&(t.active&&!e.active&&t.size>=0&&this.minSize>0&&t.size<this.minSize&&this.$refs.upload.update(t,{error:"size"}),t.progress,e.progress,t.error&&e.error,t.success&&e.success),!t&&e&&e.success&&e.response.id,Boolean(t)===Boolean(e)&&e.error===t.error||this.uploadAuto&&!this.$refs.upload.active&&(this.$refs.upload.active=!0)},alert:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){alert(t)}),onEditFileShow:function(t){this.editFile=s()({},t,{show:!0}),this.$refs.upload.update(t,{error:"edit"})},onEditorFile:function(){if(!this.$refs.upload.features.html5)return this.alert("Your browser does not support"),void(this.editFile.show=!1);var t={name:this.editFile.name,description:this.editFile.description};if(this.editFile.cropper){for(var e=atob(this.editFile.cropper.getCroppedCanvas().toDataURL(this.editFile.type).split(",")[1]),i=new Uint8Array(e.length),a=0;a<e.length;a++)i[a]=e.charCodeAt(a);t.file=new File([i],t.name,{type:this.editFile.type}),t.size=t.file.size}this.$refs.upload.update(this.editFile.id,t),this.editFile.error="",this.editFile.show=!1},onAddData:function(){if(this.addData.show=!1,this.$refs.upload.features.html5){var t=new window.File([this.addData.content],this.addData.name,{type:this.addData.type});this.$refs.upload.add(t)}else this.alert("Your browser does not support")}}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"example-full"},[i("h2",{staticClass:"example-title",staticStyle:{"text-align":"left","padding-left":"1rem"},attrs:{id:"example-title"}},[t._v("Upload files\r\n    "),i("div",{staticClass:"btn-group",staticStyle:{"margin-left":"0.5rem"}},[i("file-upload",{ref:"upload",staticClass:"btn btn-primary",attrs:{extensions:t.extensions,accept:t.accept,multiple:t.multiple,directory:t.directory,size:t.size||0,thread:t.thread<1?1:t.thread>5?5:t.thread,drop:t.drop,"drop-directory":t.dropDirectory,"add-index":t.addIndex},on:{"input-filter":t.inputFilter,"input-file":t.inputFile},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}},[i("i",{staticClass:"fa fa-plus"}),t._v("\r\n        Add files\r\n      ")])],1)]),t._v(" "),i("br"),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.$refs.upload&&t.$refs.upload.dropActive,expression:"$refs.upload && $refs.upload.dropActive"}],staticClass:"drop-active"},[i("h3",[t._v("Drop files to upload")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"upload"},[i("div",{staticClass:"table-responsive",staticStyle:{"min-height":"500px"}},[i("table",{staticClass:"table table-hover"},[t._m(0),t._v(" "),i("tbody",[t.files.length?t._e():i("tr",[i("td",{staticClass:"p-5",staticStyle:{height:"440px"},attrs:{colspan:"8"}},[i("div",{staticClass:"text-center p-5"},[t._m(1),t._v(" "),i("label",{staticClass:"btn btn-lg btn-primary",attrs:{for:t.name}},[i("i",{staticClass:"fa fa-plus"}),t._v(" Add Files")])])])]),t._v(" "),t._l(t.files,function(e,a){return i("tr",{key:e.id},[i("td",[t._v(t._s(a+1))]),t._v(" "),i("td",[e.thumb?i("img",{attrs:{src:e.thumb,width:"40",height:"auto"}}):i("span",[t._v("No Image")])]),t._v(" "),i("td",[i("div",{staticClass:"filename"},[t._v("\r\n                "+t._s(e.name)+"\r\n              ")]),t._v(" "),e.active||"0.00"!==e.progress?i("div",{staticClass:"progress"},[i("div",{class:{"progress-bar":!0,"progress-bar-striped":!0,"bg-danger":e.error,"progress-bar-animated":e.active},style:{width:e.progress+"%"},attrs:{role:"progressbar"}},[t._v(t._s(e.progress)+"%")])]):t._e()]),t._v(" "),e.success?i("td",[t._v(t._s(e.description))]):i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"file.description"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.description},on:{input:function(i){i.target.composing||t.$set(e,"description",i.target.value)}}})]),t._v(" "),i("td",[t._v(t._s(e.type))]),t._v(" "),i("td",[t._v(t._s(t._f("formatSize")(e.size)))]),t._v(" "),e.error?i("td",{staticClass:"text-danger"},["cancel"==e.error?i("strong",[t._v("canceled")]):t._e()]):e.success?i("td",{staticClass:"text-success"},[i("strong",[t._v("success")])]):e.active?i("td",[t._v("active")]):i("td"),t._v(" "),i("td",[i("div",{staticClass:"btn-group"},[i("button",{staticClass:"btn btn-secondary btn-sm dropdown-toggle",attrs:{type:"button"}},[t._v("\r\n                  Action\r\n                ")]),t._v(" "),i("div",{staticClass:"dropdown-menu"},[i("a",{class:{"dropdown-item":!0,disabled:e.active||e.success||"compressing"===e.error},attrs:{href:"#"},on:{click:function(i){i.preventDefault(),!e.active&&!e.success&&"compressing"!==e.error&&t.onEditFileShow(e)}}},[t._v("Edit")]),t._v(" "),i("a",{class:{"dropdown-item":!0,disabled:!e.active},attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.active&&(e.error="cancel")}}},[t._v("Cancel")]),t._v(" "),e.error&&"compressing"!==e.error&&t.$refs.upload.features.html5?i("a",{class:{"dropdown-item":!0,disabled:e.active},on:{click:function(i){i.preventDefault(),t.uploadFileToFirebase(e,{active:!0,reupload:!0})}}},[t._v("Reupload")]):i("a",{class:{"dropdown-item":!0,disabled:e.active||e.success||"compressing"===e.error},attrs:{href:"#"},on:{click:function(i){i.preventDefault(),!e.success&&"compressing"!==e.error&&t.uploadFileToFirebase(e,{active:!0,reupload:!1})}}},[t._v("Upload")]),t._v(" "),i("div",{staticClass:"dropdown-divider"}),t._v(" "),i("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(i){i.preventDefault(),t.$refs.upload.remove(e)}}},[t._v("Remove")])])])])])})],2)])])]),t._v(" "),i("div",{class:{"modal-backdrop":!0,fade:!0,show:t.editFile.show}}),t._v(" "),i("div",{class:{modal:!0,fade:!0,show:t.editFile.show},attrs:{id:"modal-edit-file",tabindex:"-1",role:"dialog"}},[i("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header"},[i("h5",{staticClass:"modal-title"},[t._v("Edit file")]),t._v(" "),i("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.editFile.show=!1}}},[i("span",[t._v("Ã—")])])]),t._v(" "),i("form",{on:{submit:function(e){e.preventDefault(),t.onEditorFile(e)}}},[i("div",{staticClass:"modal-body"},[i("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[i("label",{staticStyle:{"margin-bottom":".5rem"},attrs:{for:"name"}},[t._v("Name:")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.editFile.name,expression:"editFile.name"}],staticClass:"form-control",attrs:{type:"text",required:"",id:"name",placeholder:"File font-awesome"},domProps:{value:t.editFile.name},on:{input:function(e){e.target.composing||t.$set(t.editFile,"name",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[i("label",{staticStyle:{"margin-bottom":"0.5rem"},attrs:{for:"description"}},[t._v("Description:")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.editFile.description,expression:"editFile.description"}],staticClass:"form-control",attrs:{type:"text",id:"description",placeholder:"File description"},domProps:{value:t.editFile.description},on:{input:function(e){e.target.composing||t.$set(t.editFile,"description",e.target.value)}}})]),t._v(" "),t.editFile.show&&t.editFile.blob&&t.editFile.type&&"image/"===t.editFile.type.substr(0,6)?i("div",{staticClass:"form-group",staticStyle:{"text-align":"left"}},[i("label",{staticStyle:{"margin-bottom":".5rem"}},[t._v("Image: ")]),t._v(" "),i("div",{staticClass:"edit-image"},[i("img",{ref:"editImage",attrs:{src:t.editFile.blob}})]),t._v(" "),i("div",{staticClass:"edit-image-tool"},[i("div",{staticClass:"btn-group",attrs:{role:"group"}},[i("button",{staticClass:"btn btn-primary",attrs:{type:"button",title:"cropper.rotate(-90)"},on:{click:function(e){t.editFile.cropper.rotate(-90)}}},[i("i",{staticClass:"fa fa-undo",attrs:{"aria-hidden":"true"}})]),t._v(" "),i("button",{staticClass:"btn btn-primary",attrs:{type:"button",title:"cropper.rotate(90)"},on:{click:function(e){t.editFile.cropper.rotate(90)}}},[i("i",{staticClass:"fa fa-repeat",attrs:{"aria-hidden":"true"}})])]),t._v(" "),i("div",{staticClass:"btn-group",attrs:{role:"group"}},[i("button",{staticClass:"btn btn-primary",attrs:{type:"button",title:"cropper.crop()"},on:{click:function(e){t.editFile.cropper.crop()}}},[i("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})]),t._v(" "),i("button",{staticClass:"btn btn-primary",attrs:{type:"button",title:"cropper.clear()"},on:{click:function(e){t.editFile.cropper.clear()}}},[i("i",{staticClass:"fa fa-remove",attrs:{"aria-hidden":"true"}})])])])]):t._e()]),t._v(" "),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.editFile.show=!1}}},[t._v("Close")]),t._v(" "),i("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Save")])])])])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",[i("th",[t._v("#")]),t._v(" "),i("th",[t._v("Thumb")]),t._v(" "),i("th",[t._v("Name")]),t._v(" "),i("th",[t._v("Description")]),t._v(" "),i("th",[t._v("Type")]),t._v(" "),i("th",[t._v("Size")]),t._v(" "),i("th",[t._v("Status")]),t._v(" "),i("th",[t._v("Action")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",[this._v("Drop files anywhere to upload"),e("br"),this._v("or")])}]};var h=i("VU/8")(f,m,!1,function(t){i("KPPl")},"data-v-275af745",null);e.a=h.exports},vX5M:function(t,e,i){"use strict";i.d(e,"a",function(){return s}),i.d(e,"b",function(){return r});var a=i("Sazm"),s=i.n(a).a.initializeApp({apiKey:"AIzaSyCk2d9dzE-nALc2RHn4_dmIZmelmZEPi2U",authDomain:"vuejs-firebase-02-ded5b.firebaseapp.com",databaseURL:"https://vuejs-firebase-02-ded5b.firebaseio.com",projectId:"vuejs-firebase-02-ded5b",storageBucket:"vuejs-firebase-02-ded5b.appspot.com",messagingSenderId:"131882522328"}),r=s.database().ref("files")},y2e0:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.565a9ded772c64c6fd7e.js.map